# üîß ÿØŸÑŸäŸÑ ÿßŸÑŸÖÿ∑Ÿàÿ± - ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä

## ÿßŸÑŸÖÿ≠ÿ™ŸàŸäÿßÿ™
1. [ŸÖÿπŸÖÿßÿ±Ÿäÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ](#ŸÖÿπŸÖÿßÿ±Ÿäÿ©-ÿßŸÑŸÜÿ∏ÿßŸÖ)
2. [ŸáŸäŸÉŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ](#ŸáŸäŸÉŸÑ-ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ)
3. [ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©](#ÿßŸÑÿÆÿØŸÖÿßÿ™-ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©)
4. [ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™](#ŸÇÿßÿπÿØÿ©-ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™)
5. [Workflows & Processes](#workflows--processes)
6. [ÿßŸÑÿ™Ÿàÿ≥ÿπ ŸàÿßŸÑÿ™ÿ∑ŸàŸäÿ±](#ÿßŸÑÿ™Ÿàÿ≥ÿπ-ŸàÿßŸÑÿ™ÿ∑ŸàŸäÿ±)
7. [Testing](#testing)
8. [Deployment](#deployment)

---

## ŸÖÿπŸÖÿßÿ±Ÿäÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ

### ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Laravel Application                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ Controllers  ‚îÇ  ‚îÇ   Services   ‚îÇ  ‚îÇ    Models    ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ              ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ AIDecision   ‚îÇ‚îÄ‚îÄ‚îÇ AIAnalysis   ‚îÇ‚îÄ‚îÄ‚îÇ AIDecision   ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ AIPrompt     ‚îÇ  ‚îÇ AIContext    ‚îÇ  ‚îÇ Task         ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ AIInsights   ‚îÇ  ‚îÇ AIGuardrail  ‚îÇ  ‚îÇ Project      ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ AIFeatures   ‚îÇ  ‚îÇ AIData       ‚îÇ  ‚îÇ User         ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                    Middleware Layer                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Authentication                                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Authorization (Permissions)                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - AI System Check                                        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                  Database Layer                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - PostgreSQL/MySQL                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Redis (Caching)                                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - AI Views (Optimized queries)                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                  External Services                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - AI Provider (Future: OpenAI, etc.)                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Email Service                                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Activity Logging (Spatie)                             ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Design Patterns

#### 1. Service Layer Pattern
```php
Controllers ‚Üí Services ‚Üí Models ‚Üí Database
```
- Controllers: HTTP handling only
- Services: Business logic
- Models: Data access

#### 2. Repository Pattern (Implicit via Eloquent)
```php
Service ‚Üí Model (Repository) ‚Üí Database
```

#### 3. Strategy Pattern (Guardrails)
```php
Each guardrail rule = separate strategy
```

---

## ŸáŸäŸÉŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ

```
app/
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AI/
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ AIControlController.php       # ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ AIDecisionController.php      # ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ AIPromptController.php        # ÿ•ÿØÿßÿ±ÿ© Prompts
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ AIInsightsController.php      # ŸÑŸàÿ≠ÿ© ÿßŸÑÿ±ÿ§Ÿâ
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ AIGuardrailController.php     # ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ AIFeaturesController.php      # ÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
‚îÇ       ‚îî‚îÄ‚îÄ CheckAIPermission.php                 # ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµŸÑÿßÿ≠Ÿäÿßÿ™ AI
‚îÇ
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îî‚îÄ‚îÄ AI/
‚îÇ       ‚îú‚îÄ‚îÄ AIDecision.php                        # ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™
‚îÇ       ‚îú‚îÄ‚îÄ AIPromptTemplate.php                  # ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÇŸàÿßŸÑÿ®
‚îÇ       ‚îî‚îÄ‚îÄ (Future: AIAnalysis, AIInsight)
‚îÇ
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îî‚îÄ‚îÄ AI/
‚îÇ       ‚îú‚îÄ‚îÄ AIAnalysisService.php                 # ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ/ÿßŸÑŸÖŸáÿßŸÖ
‚îÇ       ‚îú‚îÄ‚îÄ AIDataAggregator.php                  # ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
‚îÇ       ‚îú‚îÄ‚îÄ AIContextBuilder.php                  # ÿ®ŸÜÿßÿ° ÿßŸÑÿ≥ŸäÿßŸÇ
‚îÇ       ‚îú‚îÄ‚îÄ AIPromptTemplateService.php           # ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇŸàÿßŸÑÿ®
‚îÇ       ‚îú‚îÄ‚îÄ AIDecisionEngine.php                  # ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™
‚îÇ       ‚îî‚îÄ‚îÄ AIGuardrailService.php                # ÿ≠Ÿàÿßÿ¨ÿ≤ ÿßŸÑÿ£ŸÖÿßŸÜ
‚îÇ
‚îú‚îÄ‚îÄ Notifications/
‚îÇ   ‚îú‚îÄ‚îÄ NewAIDecisionNotification.php             # ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™
‚îÇ   ‚îî‚îÄ‚îÄ GuardrailViolationNotification.php        # ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿßŸÜÿ™ŸáÿßŸÉÿßÿ™
‚îÇ
‚îî‚îÄ‚îÄ Console/
    ‚îî‚îÄ‚îÄ Commands/
        ‚îî‚îÄ‚îÄ AnalyzeTasksAndProjects.php           # ÿ£ŸÖÿ± ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿØŸàÿ±Ÿä

database/
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ *_create_ai_decisions_table.php
‚îÇ   ‚îú‚îÄ‚îÄ *_create_ai_prompt_templates_table.php
‚îÇ   ‚îú‚îÄ‚îÄ *_create_ai_database_views.php
‚îÇ   ‚îî‚îÄ‚îÄ *_add_guardrail_violations_to_ai_decisions_table.php
‚îÇ
‚îî‚îÄ‚îÄ sql/
    ‚îú‚îÄ‚îÄ ai_enriched_tasks.sql                     # View ŸÑŸÑŸÖŸáÿßŸÖ ÿßŸÑŸÖÿØÿπŸÖÿ©
    ‚îî‚îÄ‚îÄ ai_project_metrics.sql                    # View ŸÑŸÖŸÇÿßŸäŸäÿ≥ ÿßŸÑŸÖÿ¥ÿßÿ±Ÿäÿπ

resources/
‚îî‚îÄ‚îÄ views/
    ‚îî‚îÄ‚îÄ admin/
        ‚îú‚îÄ‚îÄ ai-control/index.blade.php            # ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ
        ‚îú‚îÄ‚îÄ ai-decisions/
        ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php                   # ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™
        ‚îÇ   ‚îî‚îÄ‚îÄ show.blade.php                    # ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÇÿ±ÿßÿ±
        ‚îú‚îÄ‚îÄ ai-prompts/
        ‚îÇ   ‚îú‚îÄ‚îÄ index.blade.php                   # ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÇŸàÿßŸÑÿ®
        ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php                  # ÿ•ŸÜÿ¥ÿßÿ° ŸÇÿßŸÑÿ®
        ‚îÇ   ‚îú‚îÄ‚îÄ edit.blade.php                    # ÿ™ÿπÿØŸäŸÑ ŸÇÿßŸÑÿ®
        ‚îÇ   ‚îî‚îÄ‚îÄ show.blade.php                    # ÿπÿ±ÿ∂ ŸÇÿßŸÑÿ®
        ‚îú‚îÄ‚îÄ ai-insights/
        ‚îÇ   ‚îî‚îÄ‚îÄ index.blade.php                   # ŸÑŸàÿ≠ÿ© ÿßŸÑÿ±ÿ§Ÿâ
        ‚îú‚îÄ‚îÄ ai-guardrails/
        ‚îÇ   ‚îî‚îÄ‚îÄ index.blade.php                   # ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ
        ‚îî‚îÄ‚îÄ ai-features/
            ‚îî‚îÄ‚îÄ index.blade.php                   # ÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©

routes/
‚îî‚îÄ‚îÄ ai.php                                        # ÿ¨ŸÖŸäÿπ routes ÿßŸÑŸÄ AI

docs/
‚îú‚îÄ‚îÄ USER_GUIDE.md                                 # ÿØŸÑŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
‚îú‚îÄ‚îÄ DEVELOPER_GUIDE.md                            # ÿØŸÑŸäŸÑ ÿßŸÑŸÖÿ∑Ÿàÿ±
‚îî‚îÄ‚îÄ API_DOCUMENTATION.md                          # ÿ™Ÿàÿ´ŸäŸÇ API
```

---

## ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©

### 1. AIDataAggregator

**ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:** ÿ¨ŸÖÿπ Ÿàÿ™ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™

```php
namespace App\Services\AI;

class AIDataAggregator
{
    /**
     * Fetch enriched tasks data
     */
    public function getEnrichedTasks(array $filters = []): Collection
    {
        $cacheKey = 'ai_enriched_tasks_' . md5(json_encode($filters));
        
        return Cache::remember($cacheKey, 3600, function () use ($filters) {
            return DB::table('ai_enriched_tasks')
                ->when(!empty($filters), function ($query) use ($filters) {
                    // Apply filters
                })
                ->get();
        });
    }
    
    /**
     * Get project metrics
     */
    public function getProjectMetrics(int $projectId): array
    {
        // Implementation...
    }
}
```

**Key Methods:**
- `getEnrichedTasks()`: Tasks ŸÖÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©
- `getProjectMetrics()`: ŸÖŸÇÿßŸäŸäÿ≥ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ
- `getCachedData()`: ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ§ŸÇÿ™ÿ©
- `clearCache()`: ŸÖÿ≥ÿ≠ ÿßŸÑŸÄ cache

### 2. AIContextBuilder

**ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:** ÿ®ŸÜÿßÿ° ÿßŸÑÿ≥ŸäÿßŸÇ ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑ

```php
namespace App\Services\AI;

class AIContextBuilder
{
    /**
     * Build task context
     */
    public function buildTaskContext(Task $task): array
    {
        return [
            'task_data' => [
                'id' => $task->id,
                'title' => $task->title,
                'status' => $task->status,
                'priority' => $task->priority,
                // ...
            ],
            'project_context' => $this->getProjectContext($task->project),
            'historical_data' => $this->getHistoricalData($task),
            'team_context' => $this->getTeamContext($task),
        ];
    }
}
```

**Key Methods:**
- `buildTaskContext()`: ÿ≥ŸäÿßŸÇ ÿßŸÑŸÖŸáŸÖÿ©
- `buildProjectContext()`: ÿ≥ŸäÿßŸÇ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ
- `getHistoricalData()`: ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿßÿ±ŸäÿÆŸäÿ©
- `enrichContext()`: ÿ•ÿ´ÿ±ÿßÿ° ÿßŸÑÿ≥ŸäÿßŸÇ

### 3. AIDecisionEngine

**ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:** ŸÖÿ≠ÿ±ŸÉ ÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™

```php
namespace App\Services\AI;

class AIDecisionEngine
{
    protected AIDataAggregator $dataAggregator;
    protected AIContextBuilder $contextBuilder;
    protected AIGuardrailService $guardrailService;
    
    /**
     * Analyze and generate decisions
     */
    public function analyzeAndDecide(
        string $entityType, 
        int $entityId
    ): ?AIDecision {
        // 1. Gather data
        $data = $this->dataAggregator->getData($entityType, $entityId);
        
        // 2. Build context
        $context = $this->contextBuilder->build($entityType, $data);
        
        // 3. Generate decision
        $decision = $this->generateDecision($context);
        
        // 4. Store decision
        return $decision->save() ? $decision : null;
    }
    
    /**
     * Execute decision
     */
    public function executeDecision(AIDecision $decision): bool
    {
        // 1. Check guardrails
        $guardrailCheck = $this->guardrailService->checkDecision($decision);
        
        if (!$guardrailCheck['passed']) {
            // Log violations
            $decision->update([
                'guardrail_violations' => $guardrailCheck['total_violations'],
                'guardrail_check' => $guardrailCheck,
            ]);
            
            // Block critical/high
            if (in_array($guardrailCheck['highest_severity'], ['critical', 'high'])) {
                $this->notifyViolation($decision, $guardrailCheck);
                return false;
            }
        }
        
        // 2. Execute action
        // ...
        
        // 3. Log execution
        activity('ai')->causedBy(auth()->user())
            ->performedOn($decision)
            ->log('decision_executed');
            
        return true;
    }
}
```

**Key Methods:**
- `analyzeAndDecide()`: ÿ™ÿ≠ŸÑŸäŸÑ Ÿàÿ™ŸàŸÑŸäÿØ ŸÇÿ±ÿßÿ±
- `executeDecision()`: ÿ™ŸÜŸÅŸäÿ∞ ŸÇÿ±ÿßÿ±
- `generateDecision()`: ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÇÿ±ÿßÿ±
- `calculateConfidence()`: ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ´ŸÇÿ©

### 4. AIGuardrailService

**ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:** ÿ≠Ÿàÿßÿ¨ÿ≤ ÿßŸÑÿ£ŸÖÿßŸÜ

```php
namespace App\Services\AI;

class AIGuardrailService
{
    /**
     * Check decision against guardrails
     */
    public function checkDecision(AIDecision $decision): array
    {
        $violations = [];
        $rules = $this->getActiveRules();
        
        // Rule 1: No data deletion
        if ($rules['no_data_deletion'] && $this->involvesDataDeletion($decision)) {
            $violations[] = [
                'rule' => 'no_data_deletion',
                'severity' => 'critical',
                'message' => 'Decision involves data deletion',
                'recommendation' => 'Mark for manual review',
            ];
        }
        
        // Rule 2: No critical changes
        if ($rules['no_critical_changes'] && $this->isCriticalChange($decision)) {
            $violations[] = [
                'rule' => 'no_critical_changes',
                'severity' => 'high',
                'message' => 'Critical change detected',
                'recommendation' => 'Requires approval',
            ];
        }
        
        // Rule 3: No mass changes
        if ($rules['no_mass_changes'] && $this->isMassChange($decision)) {
            $violations[] = [
                'rule' => 'no_mass_changes',
                'severity' => 'high',
                'message' => 'Mass change exceeds threshold',
                'recommendation' => 'Split into smaller batches',
            ];
        }
        
        // Rule 4: No unverified actions
        if ($rules['no_unverified_actions'] && $this->isLowConfidence($decision)) {
            $violations[] = [
                'rule' => 'no_unverified_actions',
                'severity' => 'medium',
                'message' => 'Confidence below threshold',
                'recommendation' => 'Requires manual verification',
            ];
        }
        
        return [
            'passed' => empty($violations),
            'violations' => $violations,
            'total_violations' => count($violations),
            'highest_severity' => $this->getHighestSeverity($violations),
        ];
    }
}
```

**Key Methods:**
- `checkDecision()`: ŸÅÿ≠ÿµ ÿßŸÑŸÇÿ±ÿßÿ±
- `getActiveRules()`: ÿßŸÑŸÇŸàÿßÿπÿØ ÿßŸÑŸÖŸÅÿπŸëŸÑÿ©
- `updateRule()`: ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿπÿØÿ©
- `updateThreshold()`: ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿØ
- `getStatistics()`: ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™

### 5. AIAnalysisService

**ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:** ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©

```php
namespace App\Services\AI;

class AIAnalysisService
{
    /**
     * Get system insights
     */
    public function getSystemInsights(): array
    {
        return [
            'health_score' => $this->calculateHealthScore(),
            'system_status' => $this->determineSystemStatus(),
            'metrics' => $this->getKeyMetrics(),
            'trends' => $this->analyzeTrends(),
        ];
    }
    
    /**
     * Analyze trends
     */
    public function analyzeTrends(): array
    {
        return [
            'acceptance_trend' => $this->getAcceptanceTrend(),
            'confidence_trend' => $this->getConfidenceTrend(),
            'volume_trend' => $this->getVolumeTrend(),
        ];
    }
}
```

---

## ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™

### ÿßŸÑÿ¨ÿØÿßŸàŸÑ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©

#### 1. `ai_decisions`

```sql
CREATE TABLE ai_decisions (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    decision_type VARCHAR(255) NOT NULL,
    entity_type VARCHAR(255) NOT NULL,
    entity_id BIGINT UNSIGNED NOT NULL,
    task_id BIGINT UNSIGNED NULL,
    project_id BIGINT UNSIGNED NULL,
    recommendation TEXT NOT NULL,
    reasoning JSON NOT NULL,
    confidence_score DECIMAL(5,4) NOT NULL,
    alternatives JSON NULL,
    user_action VARCHAR(50) DEFAULT 'pending',
    user_comment TEXT NULL,
    reviewed_by BIGINT UNSIGNED NULL,
    reviewed_at TIMESTAMP NULL,
    executed_at TIMESTAMP NULL,
    execution_result JSON NULL,
    guardrail_violations INT DEFAULT 0,
    guardrail_check JSON NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_entity (entity_type, entity_id),
    INDEX idx_task (task_id),
    INDEX idx_project (project_id),
    INDEX idx_user_action (user_action),
    INDEX idx_decision_type (decision_type)
);
```

#### 2. `ai_prompt_templates`

```sql
CREATE TABLE ai_prompt_templates (
    id BIGINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL UNIQUE,
    description TEXT NULL,
    category VARCHAR(100) NOT NULL,
    template TEXT NOT NULL,
    variables JSON NULL,
    version INT DEFAULT 1,
    is_active BOOLEAN DEFAULT TRUE,
    usage_count INT DEFAULT 0,
    last_used_at TIMESTAMP NULL,
    created_by BIGINT UNSIGNED NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_category (category),
    INDEX idx_active (is_active)
);
```

### ÿßŸÑŸÄ Views ÿßŸÑŸÖŸèÿ≠ÿ≥ŸëŸÜÿ©

#### 1. `ai_enriched_tasks`

```sql
CREATE VIEW ai_enriched_tasks AS
SELECT 
    t.id,
    t.title,
    t.description,
    t.status,
    t.priority,
    t.due_date,
    t.assigned_to,
    t.project_id,
    p.title as project_title,
    p.priority as project_priority,
    u.name as assignee_name,
    -- Task metrics
    DATEDIFF(t.due_date, NOW()) as days_until_due,
    CASE 
        WHEN t.due_date < NOW() THEN TRUE 
        ELSE FALSE 
    END as is_overdue,
    -- Other enriched data...
FROM tasks t
LEFT JOIN projects p ON t.project_id = p.id
LEFT JOIN users u ON t.assigned_to = u.id;
```

#### 2. `ai_project_metrics`

```sql
CREATE VIEW ai_project_metrics AS
SELECT 
    p.id,
    p.title,
    p.status,
    p.priority,
    p.budget,
    p.start_date,
    p.end_date,
    COUNT(t.id) as total_tasks,
    SUM(CASE WHEN t.status = 'completed' THEN 1 ELSE 0 END) as completed_tasks,
    -- Metrics...
FROM projects p
LEFT JOIN tasks t ON p.id = t.project_id
GROUP BY p.id;
```

---

## Workflows & Processes

### Decision Generation Workflow

```mermaid
graph TD
    A[Trigger: Cron/Manual] --> B[AIDecisionEngine::analyzeAndDecide]
    B --> C[AIDataAggregator::getData]
    C --> D[AIContextBuilder::buildContext]
    D --> E[Generate Decision]
    E --> F[Calculate Confidence]
    F --> G{Confidence > 70%?}
    G -->|Yes| H[Store Decision]
    G -->|No| I[Mark as Low Confidence]
    H --> J[Notify Users]
    I --> J
    J --> K[END]
```

### Decision Execution Workflow

```mermaid
graph TD
    A[User Action: Accept] --> B[AIDecisionEngine::executeDecision]
    B --> C[AIGuardrailService::checkDecision]
    C --> D{Violations?}
    D -->|No| E[Execute Action]
    D -->|Yes| F{Severity?}
    F -->|Critical/High| G[Block Execution]
    F -->|Medium/Low| H[Log Warning]
    G --> I[Notify Admins]
    H --> E
    E --> J[Update Decision]
    J --> K[Log Activity]
    K --> L[END]
```

---

## ÿßŸÑÿ™Ÿàÿ≥ÿπ ŸàÿßŸÑÿ™ÿ∑ŸàŸäÿ±

### ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿ±ÿßÿ± ÿ¨ÿØŸäÿØ

```php
// 1. Create decision type constant
class AIDecision extends Model
{
    const TYPE_YOUR_NEW_TYPE = 'your_new_type';
}

// 2. Add generation logic in AIDecisionEngine
protected function generateDecision(array $context): array
{
    // Your logic...
    return [
        'decision_type' => AIDecision::TYPE_YOUR_NEW_TYPE,
        'recommendation' => '...',
        'reasoning' => [...],
        'confidence_score' => 0.85,
    ];
}

// 3. Add execution logic
protected function executeYourNewType(AIDecision $decision): bool
{
    // Implementation...
    return true;
}
```

### ÿ•ÿ∂ÿßŸÅÿ© guardrail ÿ¨ÿØŸäÿØ

```php
// In AIGuardrailService

protected function checkYourNewRule(AIDecision $decision): bool
{
    // Your logic...
    return $violates;
}

// Add to checkDecision method
if ($rules['your_new_rule'] && $this->checkYourNewRule($decision)) {
    $violations[] = [
        'rule' => 'your_new_rule',
        'severity' => 'high',
        'message' => '...',
        'recommendation' => '...',
    ];
}
```

---

## Testing

### Unit Tests

```php
// tests/Unit/Services/AIGuardrailServiceTest.php

class AIGuardrailServiceTest extends TestCase
{
    public function test_no_data_deletion_rule()
    {
        $service = new AIGuardrailService();
        $decision = AIDecision::factory()->create([
            'decision_type' => 'delete_task',
        ]);
        
        $result = $service->checkDecision($decision);
        
        $this->assertFalse($result['passed']);
        $this->assertEquals('critical', $result['highest_severity']);
    }
}
```

### Feature Tests

```php
// tests/Feature/AI/DecisionControllerTest.php

class DecisionControllerTest extends TestCase
{
    public function test_user_can_view_decisions()
    {
        $user = User::factory()->create();
        $user->givePermissionTo('view-ai-decisions');
        
        $response = $this->actingAs($user)
            ->get(route('ai.decisions.index'));
            
        $response->assertStatus(200);
    }
}
```

---

## Deployment

### Environment Variables

```env
# AI Configuration
AI_SYSTEM_ENABLED=true
AI_CACHE_TTL=3600
AI_ANALYSIS_CRON="0 2 * * *"

# Guardrails
AI_GUARDRAIL_MASS_LIMIT=5
AI_GUARDRAIL_MIN_CONFIDENCE=0.7
```

### Artisan Commands

```bash
# Run AI analysis
php artisan ai:analyze

# Clear AI cache
php artisan cache:forget ai_*

# Test guardrails
php artisan tinker
>>> app(AIGuardrailService::class)->checkDecision($decision)
```

---

## Best Practices

### ‚úÖ Do's

- Always use service layer for business logic
- Cache expensive queries
- Log all AI actions via Activity Log
- Validate user permissions
- Use transactions for multi-step operations
- Test guardrails thoroughly

### ‚ùå Don'ts

- Don't put business logic in controllers
- Don't bypass guardrails
- Don't expose sensitive data in logs
- Don't execute decisions without checks
- Don't forget to update documentation

---

**ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´:** ŸäŸÜÿßŸäÿ± 2026  
**ÿßŸÑÿ•ÿµÿØÿßÿ±:** 2.0.0
